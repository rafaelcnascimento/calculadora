<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="n6XrPaDCJzAresDFoAyNx0Rv3EbpClja4NMr2ehx">
    <title>CNEC - Educação Superior</title>
    <link rel="stylesheet" href="http://educacaosuperior.cnec.br/assets/css/vendor.min.css" />
    <link rel="stylesheet" href="http://educacaosuperior.cnec.br/assets/css/styles.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600|Poppins:200,300,400,500,600,700,900" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="http://educacaosuperior.cnec.br/assets/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="http://educacaosuperior.cnec.br/assets/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="http://educacaosuperior.cnec.br/assets/img/favicon/favicon-16x16.png">
    <link rel="mask-icon" href="http://educacaosuperior.cnec.br/assets/img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
   <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<style type="text/css">
    body{
        font-family: 'Open Sans';
        background-color: #DBDCEA;
        font-size: 14px;
        color: black;
    }

    .top{
        color: white;
        margin-left: 260px;
        margin-top: 6px;
    }

    a:visited{
      color:white;
    }

    .local{
        color: white;
        margin-top: 14px;
        margin-left: 620px; 
    }

    .logo{
        width: 300px; 
    }

    .btn-primary.custom-btn {
      background-color: #2D3073;
      border-color: #2D3073;
    }

    .footer {
      position: absolute;
      right: 0;
      bottom: 0;
      left: 0;
      text-align: center;
    }

</style>
<body class="">
    <header>
        <div class="topnav">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12 col-md-6 col-xs-12">
                        <div class="tn-info text-sm-center">
                            <div class="tn-slogan"><a href="http://www.cnec.br/" title="CNEC | ACREDITA NO SER" target="_blank">CNEC</a></div>
                        </div>
                    </div>
                    <div class="col-md-6 hidden-xs hidden-sm">
                        <ul>
                            <li><a href="http://educacaosuperior.cnec.br/santoangelo" title="Portal CNEC Santo Ângelo">Portal CNEC Santo Ângelo</a></li>
                            <li><a href="http://educacaosuperior.cnec.br/santoangelo/contato/trabalhe-conosco" title="Trabalhe consosco">Trabalhe Conosco</a></li>
                            <li><a href="http://www.cnec.br/sistema-academico/" target="_blank" title="Sistema Acadêmico">Sistema Acadêmico</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <br>
    <br>
    <br>
    <center>
        <div class="titulo">
            <img src="logo.png" class="logo">
            <br>
            <br>
            <h1>Calculadora de Notas</h1>
        </div>    
        
        <table class="borderless">
            <thead>
                <tr>
                    <th>AV1</th>
                    <th>AV2</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <input id="av1" type="text" class="form-control" placeholder="Nota sobre 10" onclick="this.select()">
                    </td>
                    <td>
                        <input id="av2" type="text" class="form-control" placeholder="Nota sobre 10" onclick="this.select()">
                    </td>
                </tr>
            </tbody>
        </table>
        <br>
        <button id="calcular" class="btn btn-primary custom-btn">
            Calcular
        </button>

        <div id="resultado">    
        </div>   

        <br>
        <h3>Como utilizar:</h3>
               <div style="font-size: 16px; text-align: justify; margin-left: 30% " >
                  <li>Preencha AV1 e AV2 para calcular a sua média e nota necessária na AV3(Substitutiva)</li>
                  <li>Preencha AV1 ou AV2 para calcular a nota necessária na outra avaliação para alcançar a média</li>
               </div>    
               <br>
               <h3>Regras do novo método de avaliação:</h3>
               <div style="font-size: 16px; text-align: justify; margin-left: 30% " >
                  <li>A média para aprovação é 6</li>
                  <li>Serão três avaliações: AV1, AV2 e AV3(Substitutiva)</li>
                  <li>Caso as notas na AV1 e AV2 sejam ambas inferiores a 4 o aluno está automaticamente reprovado</li>
                  <li>O peso do Projeto Integrador é de 2 pontos na AV2</li>
               </div>    
    </center>

    <footer class="footer">
           <div class="container">
               <p>Desenvolvido pelo acadêmico Rafael Nascimento do curso de <b>Análise e Desenvolvimento de Sistemas</b></p>
           </div>

       </footer>
 
</body>

</html>
<script>
    //Feio, mas funciona
    $(document).on('keyup', function(event) {
        if (event.which == 13) {
            $("#calcular").click();
        }
    });
    $('#calcular').on('click', function() {
        var av1 = ponto($("#av1").val());
        var av2 = ponto($("#av2").val());
        var media = (av1 + av2)/2;
        var nota;
        var av;
        var regex = new RegExp('^[0-9]{1,2}([,.][0-9]{1,2})?$');

        if (!$("#av1").val() && !$("#av2").val()) {
            alert ('Preencha ao menos um campo');
            return false;
        }

        if (av1 > 10 || av2 > 10 || av1 < 0 || av2 < 0 ) {
            alert("As notas devem ser entre 0 e 10");
            return false;
        }

        if ($("#av1").val()) {
            if (!regex.test(av1)) {
                alert("Use apenas numeros");
                return false;
            }
        }

        if ($("#av2").val()) {
            if (!regex.test(av2)) {
                alert("Use apenas numeros");
                return false;
            }
        }

        // if (!regex.test(av2)) {
        //     alert("Use apenas numeros");
        //     return false;
        // }

        if (av1 < 4 && av2 < 4) {
            $('#resultado').html('<br><h3 style="color: red;">Reprovado, sem direito à AV3(Substitutiva)</h3>');
            return false;
        }

        if (media >= 6) {
            $('#resultado').html('<br><h3 style="color: green;">Sua média é '+virgula(parseFloat(media).toFixed(2))+' <br>Aprovado</h3>');
            return false;
        }

        if (media < 6) {
            if (av1 > av2) {
                nota = 12 - av1;
            } else {
                nota = 12 - av2
            }
            $('#resultado').html('<br><h3 style="color: blue;">Sua média é '+virgula(parseFloat(media).toFixed(2))+'<br>Você precisa de '+virgula(parseFloat(nota).toFixed(2))+' na AV3(Substitutiva) para ser aprovado</h3>');
            return false;
        }

        if (!av1 || !av2) {
            if (!av1) {
                nota = 12 - av2;
                av = 'AV1';
            } else {
                nota = 12 - av1
                av = 'AV2';
            }

            if(nota > 10) {
                $('#resultado').html('<br><h3 style="color: purple;">Não é possível ser aprovado sem realizar a AV3(Substitutiva)<br>É necessário nota superior a 4 na AV2 para não ser reprovado automaticamente</h3>');
            } else {
                $('#resultado').html('<br><h3 style="color: blue;">Você precisa de '+virgula(parseFloat(nota).toFixed(2))+' na '+av+' para ser aprovado</h3>');
                if (nota > 8) {
                    $('#resultado').append('<h3 style="color: purple;">É necessário nota superior a 4 na AV2 para não ser reprovado automaticamente</h3>')
                }
            }
           
            return false;
        }

        function ponto(num) {
            if (num.includes(',')) {
                return parseFloat(num.replace(',','.'));
            } else {
                return parseFloat(num);
            }
        } 

        function virgula(num) {
            return num.replace('.',',')
        }
    })
</script>
